<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Register - TorPay Merchant</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Onest:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/torpay-merchant.css') }}">
</head>
<body class="torpay-merchant">
  <div class="torpay-auth-container">
    <div class="torpay-auth-card torpay-animate">
        <div class="torpay-auth-logo">
          <div class="torpay-auth-logo-icon"></div>
          <h1 class="torpay-auth-title">Create your account</h1>
          <p class="torpay-auth-subtitle">Start accepting crypto payments in minutes</p>
          <p class="torpay-auth-subtitle" style="font-size: 0.9rem; color: var(--torpay-gray-500);">
            We'll generate a random Login ID + Secret for you. Set a phrase to protect changes and payouts.
          </p>
        </div>

        {% for message in get_flashed_messages() %}
        <div class="torpay-alert torpay-alert-danger">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"/>
            <line x1="15" y1="9" x2="9" y2="15"/>
            <line x1="9" y1="9" x2="15" y2="15"/>
          </svg>
          <span>{{ message }}</span>
        </div>
        {% endfor %}

      <form class="torpay-auth-form" method="post">
        <div class="torpay-form-group">
          <label class="torpay-form-label" for="security_phrase">Security Phrase</label>
          <div style="display: flex; gap: 0.5rem; align-items: center;">
            <input
              type="password"
              id="security_phrase"
              name="security_phrase"
              class="torpay-form-input"
              placeholder="Min. 8 characters"
              minlength="8"
              required
              autofocus
              style="flex: 1;"
            >
            <button type="button" class="torpay-btn torpay-btn-secondary torpay-btn-sm" onclick="togglePhrase('security_phrase', this)">Show</button>
          </div>
          <p style="color: var(--torpay-gray-500); font-size: 0.85rem; margin-top: 0.5rem;">
            Required to rotate your login secret or request payouts.
          </p>
        </div>

        <div class="torpay-form-group">
          <label class="torpay-form-label" for="security_phrase_confirm">Confirm Security Phrase</label>
          <div style="display: flex; gap: 0.5rem; align-items: center;">
            <input
              type="password"
              id="security_phrase_confirm"
              name="security_phrase_confirm"
              class="torpay-form-input"
              placeholder="Re-enter your security phrase"
              minlength="8"
              required
              style="flex: 1;"
            >
            <button type="button" class="torpay-btn torpay-btn-secondary torpay-btn-sm" onclick="togglePhrase('security_phrase_confirm', this)">Show</button>
          </div>
        </div>

        <button type="submit" class="torpay-btn torpay-btn-primary torpay-btn-lg" style="width: 100%;">
          Create Account
        </button>
      </form>

    <div class="torpay-auth-footer">
      Already have an account? <a href="{{ url_for('merchant_auth.login') }}">Sign in</a>
    </div>
  </div>
</div>
<script>
  function togglePhrase(id, btn) {
    const el = document.getElementById(id);
    if (!el) return;
    el.type = el.type === 'password' ? 'text' : 'password';
    btn.textContent = el.type === 'password' ? 'Show' : 'Hide';
  }
</script>
</body>
</html>
